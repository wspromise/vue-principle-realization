{"version":3,"file":"vue.js","sources":["../utils/index.js","../src/observe/array.js","../src/observe/dep.js","../src/observe/index.js","../src/state.js","../src/compiler/generate.js","../src/compiler/parser.js","../src/compiler/index.js","../src/observe/watcher.js","../src/vdom/patch.js","../src/lifecycle.js","../src/init.js","../src/vdom/index.js","../src/render.js","../src/index.js"],"sourcesContent":["export function getDataType(target) {\r\n  return Object.prototype.toString.call(target).slice(8, -1);\r\n}\r\n\r\nexport const isObject = (val) => getDataType(val) === 'Object';\r\n","let arrayPrototype = Array.prototype;\r\n// arrayMethods的原型是Array.prototype\r\nexport let arrayMethods = Object.create(arrayPrototype);\r\n// 数组的变异方法\r\nlet arrayList = [\r\n  'push',\r\n  'pop',\r\n  'shift',\r\n  'unshift',\r\n  'reverse',\r\n  'splice',\r\n  'sort',\r\n];\r\n\r\narrayList.forEach((method) => {\r\n  arrayMethods[method] = function (...args) {\r\n    // 数组调用变异方法，先调用数组原生的方法\r\n    arrayPrototype[method].call(this, ...args);\r\n    let inserted = null;\r\n    switch (method) {\r\n      case 'splice':\r\n        inserted = args.slice(2);\r\n        break;\r\n\r\n      case 'push':\r\n      case 'unshift':\r\n        inserted = args;\r\n    }\r\n\r\n    inserted && this.__ob__.observeArr(inserted);\r\n  };\r\n});\r\n","let id = 0;\r\nclass Dep {\r\n  constructor() {\r\n    this.subs = [];\r\n    this.id = id++;\r\n  }\r\n\r\n  depend() {\r\n    // 在Watcher中添加dep\r\n    Dep.target.addDep(this);\r\n  }\r\n\r\n  addSub(watcher) {\r\n    // 在dep中添加watcher\r\n    this.subs.push(watcher);\r\n  }\r\n  \r\n  notify() {\r\n    this.subs.forEach((watcher) => watcher.update());\r\n  }\r\n}\r\nDep.target = null; // 定义一个全局变量\r\nexport default Dep;\r\n","import { getDataType } from '../../utils';\r\nimport { arrayMethods } from './array';\r\nimport Dep from './dep';\r\n\r\nclass Observe {\r\n  constructor(data) {\r\n    // 在data上加上属性__ob__, 一是在数组变异方法中能拿到Observe实例，进行监测数组和对象， 二是对已经监测的数据打上标记\r\n    Object.defineProperty(data, '__ob__', {\r\n      value: this, // this是Observe实例\r\n      enumerable: false,\r\n    });\r\n\r\n    if (Array.isArray(data)) {\r\n      // 如果是数组改写数组的原型\r\n      data.__proto__ = arrayMethods;\r\n      // 递归监测数组\r\n      this.observeArr(data);\r\n    } else {\r\n      // 递归监测对象\r\n      this.walk(data);\r\n    }\r\n  }\r\n\r\n  // 监测数组中的每一项数据\r\n  observeArr(data) {\r\n    data.forEach((item) => observe(item));\r\n  }\r\n\r\n  // 监测对象中的每一项数据\r\n  walk(data) {\r\n    Object.keys(data).forEach((key) => {\r\n      ObjectReactive(data, key, data[key]);\r\n    });\r\n  }\r\n}\r\n\r\n// Vue2性能差就差在这个方法中，需要一加载时就递归调用defineProperty,耗性能\r\n// 性能优化原则\r\n// 1. 不要把所有数据都放在data中，否则都会添加get和set\r\n// 2. 数据层级不要过深，尽量扁平化数据\r\n// 3. 不要频繁的获取数据（每次获取数据都会调其get方法， get方法后期会有很多逻辑，耗性能）\r\n// 4. 如果数据不需要响应式，可以调用Object.freeze()冻结对象属性\r\n\r\nfunction ObjectReactive(data, key, value) {\r\n  // value也可能是可监测数据， 对value进行递归监测\r\n  observe(value);\r\n\r\n  let dep = new Dep();\r\n\r\n  // 使data中每个属性变成响应式的\r\n  Object.defineProperty(data, key, {\r\n    get() {\r\n      // 有没有watcher\r\n      if (Dep.target) {\r\n        // 让watcher记住dep\r\n        dep.depend();\r\n      }\r\n\r\n      return value;\r\n    },\r\n\r\n    set(newValue) {\r\n      if (newValue === value) return;\r\n      // 对newValue进行监测，如vm.message = {a: 100},那么{a: 100}也是响应式的\r\n      observe(newValue);\r\n      value = newValue;\r\n      dep.notify(); // 通知当前dep里面的watcher依次执行\r\n    },\r\n  });\r\n}\r\n\r\nexport function observe(data) {\r\n  // 如果data不是一个对象和数组(data中某个属性值可能是数组)则不再进行监测\r\n  if (\r\n    (getDataType(data) !== 'Object' && getDataType(data) !== 'Array') ||\r\n    data.__ob__\r\n  )\r\n    return;\r\n\r\n  // 监测数据， 用类实现\r\n  new Observe(data);\r\n}\r\n","import { getDataType } from '../utils';\r\nimport { observe } from './observe';\r\n\r\nexport function initState(vm) {\r\n  const options = vm.$options;\r\n\r\n  options.data && initData(vm); // 如果有data则进行初始化\r\n}\r\n\r\nfunction initData(vm) {\r\n  let data = vm.$options.data; // 获取data选项\r\n\r\n  // 判断data是否是函数， 如果是则调用得到对象，如果是对象则直接使用即可\r\n  data = vm._data = getDataType(data) === 'Function' ? data.call(vm) : data; \r\n\r\n  // 观测数据，使用Object.defineProperty()来使data中数据变成响应式的\r\n  observe(data);\r\n\r\n  // 遍历data做数据代理，通过vm访问属性代理到vm._data也就是最终得到的data里\r\n  for (const key in data) {\r\n    proxy(vm, key, '_data');\r\n  }\r\n}\r\n\r\nfunction proxy(vm, key, source) {\r\n  Object.defineProperty(vm, key, {\r\n    get() {\r\n      return vm[source][key];\r\n    },\r\n    set(newValue) {\r\n      vm[source][key] = newValue;\r\n    },\r\n  });\r\n}\r\n","const defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g; // {{   xxx  }}\r\n\r\n/**\r\n * 生成属性\r\n * @param {*} attrs 属性\r\n * @returns\r\n */\r\nfunction genProps(attrs) {\r\n  let str = '';\r\n  for (let i = 0; i < attrs.length; i++) {\r\n    let attr = attrs[i];\r\n    if (attr.name === 'style') {\r\n      let styles = {};\r\n      attr.value.replace(/([^;:]+):([^;:]+)/g, function () {\r\n        styles[arguments[1]] = arguments[2];\r\n      });\r\n\r\n      attr.value = styles;\r\n    }\r\n    str += `${attr.name}:${JSON.stringify(attr.value)},`;\r\n  }\r\n  return `{${str.slice(0, -1)}}`;\r\n}\r\n\r\nfunction gen(el) {\r\n  if (el.type === 1) {\r\n    // 如果是元素就递归生成\r\n    return generate(el);\r\n  } else {\r\n    let text = el.text;\r\n    // 普通文本\r\n    if (!defaultTagRE.test(text)) return `_v(${text})`;\r\n\r\n    // 说明文本里面有表达式\r\n    // 如果正则 +g 配合exec就会有一个问题 lastIndex的问题， 所以每次调gen方法的时候正则的lastIndex要重置\r\n    let lastIndex = (defaultTagRE.lastIndex = 0);\r\n    let match;\r\n    let tokens = [];\r\n    while ((match = defaultTagRE.exec(text))) {\r\n      const index = match.index;\r\n      if (index > lastIndex) {\r\n        const firstText = text.slice(lastIndex, index);\r\n        tokens.push(JSON.stringify(firstText));\r\n      }\r\n\r\n      // 添加变量\r\n      tokens.push(`_s(${match[1].trim()})`);\r\n      lastIndex = index + match[0].length;\r\n    }\r\n\r\n    // 到最后有可能还剩余一段 <div> aaa</div>\r\n    if (lastIndex < text.length) {\r\n      tokens.push(JSON.stringify(text.slice(lastIndex)));\r\n    }\r\n\r\n    return `_v(${tokens.join('+')})`; // webpack源码 css-loader 图片处理都是这样处理\r\n  }\r\n}\r\n\r\nfunction genChildren(el) {\r\n  let children = el.children;\r\n  if (children) {\r\n    return children.map((item) => gen(item)).join(',');\r\n  }\r\n  return false;\r\n}\r\n\r\n/**\r\n * 生成模板字符串\r\n * @param {*} ast ast语法树对象\r\n * @returns\r\n */\r\nexport function generate(ast) {\r\n  // 生成children\r\n  let children = genChildren(ast);\r\n  // 模板字符串\r\n  let code = `_c(\r\n    '${ast.tag}',${ast.attrs.length ? genProps(ast.attrs) : 'undefined'}${\r\n    children ? `,${children}` : ''\r\n  })`;\r\n  return code;\r\n}\r\n","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`; // 匹配标签名的  aa-xxx\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`; //  aa:aa-xxx\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); //  此正则可以匹配到标签名 匹配到结果的第一个(索引第一个) [1]\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配标签结尾的 </div>  [1]\r\nconst attribute =\r\n  /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性的\r\n\r\nconst startTagClose = /^\\s*(\\/?)>/; // 匹配标签结束的  />    >\r\n\r\n// Vue3的编译原理比Vue2好很多， 没有那么多正则了\r\nexport default function parserHTML(html) {\r\n  let stack = [];\r\n  let root = null;\r\n\r\n  function createASTElment(tag, attrs, parent = null) {\r\n    return {\r\n      type: 1,\r\n      tag,\r\n      parent,\r\n      attrs,\r\n      children: [],\r\n    };\r\n  }\r\n\r\n  function start(tagName, attrs) {\r\n    let parent = stack[stack.length - 1];\r\n    let element = createASTElment(tagName, attrs, parent);\r\n    root === null && (root = element);\r\n\r\n    parent && parent.children.push(element);\r\n\r\n    stack.push(element);\r\n  }\r\n\r\n  function end(tagName) {\r\n    stack.pop().tag !== tagName && console.log('标签出错');\r\n  }\r\n\r\n  function text(chars) {\r\n    let parent = stack[stack.length - 1];\r\n    chars = chars.replace(/\\s/g, '');\r\n    parent &&\r\n      chars &&\r\n      parent.children.push({\r\n        type: 2,\r\n        text: chars,\r\n      });\r\n  }\r\n\r\n  function advance(len) {\r\n    html = html.substring(len);\r\n  }\r\n\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen);\r\n\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: [],\r\n      };\r\n\r\n      advance(start[0].length);\r\n\r\n      let end;\r\n      let attr;\r\n\r\n      while (\r\n        !(end = html.match(startTagClose)) &&\r\n        (attr = html.match(attribute))\r\n      ) {\r\n        match.attrs.push({\r\n          name: attr[1],\r\n          value: attr[3] || attr[4] || attr[5],\r\n        });\r\n        advance(attr[0].length);\r\n      }\r\n\r\n      if (end) {\r\n        advance(end[0].length);\r\n      }\r\n      return match;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  while (html) {\r\n    // 解析标签和文本\r\n    let index = html.indexOf('<');\r\n    if (index === 0) {\r\n      // 解析开始标签，并且把属性也解析出来 </div>\r\n      const startTagMatch = parseStartTag();\r\n      if (startTagMatch) {\r\n        // 开始标签\r\n        start(startTagMatch.tagName, startTagMatch.attrs);\r\n        continue;\r\n      }\r\n\r\n      let endTagMatch;\r\n      if ((endTagMatch = html.match(endTag))) {\r\n        // 结束标签\r\n        end(endTagMatch[1]);\r\n        advance(endTagMatch[0].length);\r\n        continue;\r\n      }\r\n      break;\r\n    }\r\n\r\n    // 文本\r\n    if (index > 0) {\r\n      let chars = html.slice(0, index);\r\n      text(chars);\r\n      advance(chars.length);\r\n    }\r\n  }\r\n\r\n  return root;\r\n}\r\n","import { generate } from './generate';\r\nimport parserHTML from './parser';\r\n\r\nexport function compileToFunction(template) {\r\n  // 1.将模板变成ast语法树\r\n  let ast = parserHTML(template);\r\n\r\n  // 2.代码生成\r\n  let code = generate(ast); // 模板引擎的实现原理都是new Function + with  (ejs, jade等模板引擎都是这样实现的)\r\n  let render = new Function(`with(this){return ${code}}`);\r\n  return render;\r\n\r\n  // 1.编译原理\r\n  // 2.响应式原理 依赖收集\r\n  // 3.组件化开发（贯穿了vue的流程）\r\n  // 4.diff算法\r\n}\r\n","import Dep from './dep';\r\nlet id = 0;\r\nclass Watcher {\r\n  constructor(vm, fn, cb, options) {\r\n    this.vm = vm;\r\n    this.fn = fn;\r\n    this.cb = cb;\r\n    this.options = options;\r\n    this.id = id++;\r\n    // dep的id\r\n    this.depsId = new Set();\r\n    // 存放的dep\r\n    this.deps = [];\r\n    this.getter = fn; // fn就是页面的渲染逻辑\r\n    this.get(); // 上来做一次初始化渲染\r\n  }\r\n\r\n  get() {\r\n    Dep.target = this;\r\n    this.getter(); // 页面的渲染逻辑\r\n    Dep.target = null; // 渲染完毕清空标识，只有在渲染的时候才会进行依赖收集\r\n  }\r\n\r\n  addDep(dep) {\r\n    let did = dep.id;\r\n    if (!this.depsId.has(did)) {\r\n      this.depsId.add(did);\r\n      // 存放dep\r\n      this.deps.push(dep);\r\n\r\n      // 让dep存放watcher\r\n      dep.addSub(this);\r\n    }\r\n  }\r\n\r\n  update() {\r\n    console.log('update');\r\n    // 可以做异步更新处理\r\n    this.get();\r\n  }\r\n}\r\nexport default Watcher;\r\n","export function patch(el, vnode) {\r\n  // 删除老节点，根据vnode创建新节点，替换掉老节点\r\n  const elm = createElm(vnode); // 根据虚拟节点创建真实节点\r\n  const parentNode = el.parentNode;\r\n  //  el.nextSibling不存在就是null,如果为null那insertBefore就是appendChild\r\n  parentNode.insertBefore(elm, el.nextSibling);\r\n  parentNode.removeChild(el);\r\n  return elm; // 返回最新的节点\r\n}\r\n\r\n// 面试---- 虚拟节点的实现，如何将虚拟节点渲染成真实节点\r\nfunction createElm(vnode) {\r\n  let { tag, data, children, text, vm } = vnode;\r\n  // 我们让虚拟节点和真实节点做一个映射关系，后续某个虚拟节点更新了，我可以跟踪到真实节点，并且更新真实节点\r\n  if (typeof tag === 'string') {\r\n    vnode.el = document.createElement(tag);\r\n    // 如果有data属性，把他设置到元素上\r\n    updateProperties(vm.$el, data);\r\n\r\n    children.forEach((child) => vnode.el.appendChild(createElm(child)));\r\n  } else {\r\n    vnode.el = document.createTextNode(text);\r\n  }\r\n  return vnode.el;\r\n}\r\n\r\n// 后续写diff算法的时候在进行完善，没有考虑样式等\r\nfunction updateProperties(el, props = {}) {\r\n  for (const key in props) {\r\n    el.setAttribute(key, props[key]);\r\n  }\r\n}\r\n","import Watcher from './observe/watcher';\r\nimport { patch } from './vdom/patch';\r\n\r\n/**\r\n * 挂载组件\r\n * @param {*} vm 组件实例\r\n */\r\nexport function mountComponent(vm) {\r\n  // 初始化流程\r\n  let updateComponent = () => {\r\n    vm._update(vm._render()); // render()\r\n  };\r\n\r\n  // 每个组件都有一个watcher,我们把这个watcher称之为渲染watcher\r\n  new Watcher(\r\n    vm,\r\n    updateComponent,\r\n    () => {\r\n      console.log('后续增添更新钩子函数 update');\r\n    },\r\n    true\r\n  );\r\n}\r\n\r\nexport function lifeCycleMixin(Vue) {\r\n  Vue.prototype._update = function (vnode) {\r\n    // 采用的是 先序深度遍历 创建节点（遇到节点就创造节点，递归创建）\r\n    const vm = this;\r\n    vm.$el = patch(vm.$el, vnode);\r\n  };\r\n}\r\n","import { initState } from './state';\r\nimport { compileToFunction } from './compiler';\r\nimport { mountComponent } from './lifecycle';\r\n\r\nexport function initMixin(Vue) {\r\n  Vue.prototype._init = function (options) {\r\n    this.$options = options; // 为了后续扩展的方法，都可以获取到options了\r\n\r\n    // 初始化状态数据\r\n    initState(this);\r\n\r\n    if (options.el) {\r\n      // 将数据挂载到页面上\r\n      // ast--> render --> 虚拟DOM --> 真实DOM\r\n      // 更新的时候再次调用render函数 --> 虚拟DOM --> 新旧对比(diff算法) --> 更新真实DOM\r\n\r\n      this.$mount(options.el);\r\n    }\r\n  };\r\n\r\n  Vue.prototype.$mount = function (el) {\r\n    const vm = this;\r\n    // 获取真实DOM\r\n    el = document.querySelector(el);\r\n    // 将DOM挂载到实例上\r\n    this.$el = el;\r\n    let options = this.$options;\r\n\r\n    if (!options.render) {\r\n      // 模板编译\r\n      let template = options.template;\r\n      if (!template) {\r\n        template = el.outerHTML;\r\n      }\r\n\r\n      let render = compileToFunction(template);\r\n      options.render = render;\r\n    }\r\n\r\n    // 挂载组件\r\n    mountComponent(vm);\r\n  };\r\n}\r\n","// 创建元素类型的虚拟节点\r\nexport const createElement = (vm, tag, data = {}, ...children) => {\r\n  return vnode(vm, tag, data, children, data.key, undefined);\r\n};\r\n\r\n// 创建文本类型的虚拟节点\r\nexport const createText = (vm, text) => {\r\n  return vnode(vm, undefined, undefined, undefined, undefined, text);\r\n};\r\n\r\n// 创建虚拟节点\r\nfunction vnode(vm, tag, data, children, key, text) {\r\n  return {\r\n    vm,\r\n    tag,\r\n    data,\r\n    children,\r\n    key,\r\n    text,\r\n  };\r\n}\r\n\r\n// vnode 其实就是一个对象， 用来描述节点的，描述dom结构的，可以自己去扩展属性\r\n// ast描述语法的，他并没有用户自己的逻辑, 只有语法解析出来的内容\r\n","import { isObject } from '../utils';\r\nimport { createElement, createText } from './vdom';\r\n\r\nexport function renderMixin(Vue) {\r\n  // createElement 创建元素型的节点\r\n  Vue.prototype._c = function () {\r\n    const vm = this;\r\n    return createElement(vm, ...arguments);\r\n  };\r\n\r\n  // 创建文本的虚拟节点\r\n  Vue.prototype._v = function (text) {\r\n    const vm = this;\r\n    // 描述虚拟节点是属于哪个实例的\r\n    return createText(vm, text);\r\n  };\r\n\r\n  // JSON.stringify()\r\n  Vue.prototype._s = function (val) {\r\n    if (isObject(val)) return JSON.stringify(val);\r\n    return val;\r\n  };\r\n\r\n  Vue.prototype._render = function () {\r\n    const vm = this;\r\n    let { render } = vm.$options;\r\n    let vnode = render.call(vm);\r\n    return vnode;\r\n  };\r\n}\r\n","import { initMixin } from './init';\r\nimport { lifeCycleMixin } from './lifecycle';\r\nimport { renderMixin } from './render';\r\n\r\n// Vue2的响应式原理是靠Object.defineProperty(), 双向绑定原理是靠v-model\r\nfunction Vue(options) {\r\n  this._init(options); // 实现Vue初始化功能\r\n}\r\n\r\ninitMixin(Vue);\r\nrenderMixin(Vue);\r\nlifeCycleMixin(Vue);\r\n\r\n// 导出Vue供别人使用\r\nexport default Vue;\r\n\r\n// 只有根组件的情况，每个属性都有一个dep\r\n// 1. vue里面用到了观察者模式，默认组件渲染的时候，会创建一个watcher（并且会渲染视图）\r\n// 2. 当渲染视图的时候会取data中的数据，会走每个属性的get方法，就让这个属性的dep记录watcher\r\n// 3. 同时让watcher也记住dep（这个逻辑目前没用到） dep和watcher是多对多的关系，因为一个属性可能会对应多个视图，1个视图对应多个数据\r\n// 4. 如果数据发生变化，会通知对应属性的dep,依次通知存放的watcher去更新\r\n"],"names":["getDataType","target","Object","prototype","toString","call","slice","isObject","val","arrayPrototype","Array","arrayMethods","create","arrayList","forEach","method","args","inserted","__ob__","observeArr","id","Dep","constructor","subs","depend","addDep","addSub","watcher","push","notify","update","Observe","data","defineProperty","value","enumerable","isArray","__proto__","walk","item","observe","keys","key","ObjectReactive","dep","get","set","newValue","initState","vm","options","$options","initData","_data","proxy","source","defaultTagRE","genProps","attrs","str","i","length","attr","name","styles","replace","arguments","JSON","stringify","gen","el","type","generate","text","test","lastIndex","match","tokens","exec","index","firstText","trim","join","genChildren","children","map","ast","code","tag","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parserHTML","html","stack","root","createASTElment","parent","start","tagName","element","end","pop","console","log","chars","advance","len","substring","parseStartTag","indexOf","startTagMatch","endTagMatch","compileToFunction","template","render","Function","Watcher","fn","cb","depsId","Set","deps","getter","did","has","add","patch","vnode","elm","createElm","parentNode","insertBefore","nextSibling","removeChild","document","createElement","updateProperties","$el","child","appendChild","createTextNode","props","setAttribute","mountComponent","updateComponent","_update","_render","lifeCycleMixin","Vue","initMixin","_init","$mount","querySelector","outerHTML","undefined","createText","renderMixin","_c","_v","_s"],"mappings":"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"}